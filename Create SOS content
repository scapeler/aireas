/*

-- additions to the standard database createscript for PostgreSQL
ALTER TABLE public.featureofinterest ALTER COLUMN featureofinterestid SET DEFAULT nextval('featureofinterestid_seq'::regclass);
ALTER TABLE public.featureofinteresttype ALTER COLUMN featureofinteresttypeid SET DEFAULT nextval('featureofinteresttypeid_seq'::regclass);
ALTER TABLE public.observationtype ALTER COLUMN observationtypeid SET DEFAULT nextval('observationtypeid_seq'::regclass);
ALTER TABLE public.observation ALTER COLUMN observationid SET DEFAULT nextval('observationid_seq'::regclass);
ALTER TABLE public.offering ALTER COLUMN offeringid SET DEFAULT nextval('offeringid_seq'::regclass);
ALTER TABLE public.procedure ALTER COLUMN procedureid SET DEFAULT nextval('procedureid_seq'::regclass);
ALTER TABLE public.proceduredescriptionformat ALTER COLUMN proceduredescriptionformatid SET DEFAULT nextval('procdescformatid_seq'::regclass);

*/

-- featureofinteresttype
INSERT INTO public.featureofinteresttype (
            -- featureofinteresttypeid -- default value by sequence
            featureofinteresttype )
     VALUES (
            'foitype x'
            );

-- SELECT * FROM public.featureofinteresttype;

INSERT INTO public.featureofinterest ( 
            -- featureofinterestid -- default value by sequence
            hibernatediscriminator
            , featureofinteresttypeid
            , identifier
            , codespace
            , name
            , codespacename
            , description
            , geom
            , descriptionxml
            , url  ) 
     VALUES (
            null -- hibernatediscriminator
            , (select featureofinteresttypeid from featureofinteresttype where featureofinteresttype = 'foitype x')
            , '19.cal'  -- identifier
            , null -- codespace (id?)
            , 'Finisterelaan 45'  -- name
            , null -- codespacename (id?) 
            , 'Rand van woonwijk, nabij A2/A50 (meest nabijgelegen rijbaan 104 m tot straatlantaarn (woningen en wal ertussen))' -- description
            , ST_Transform(ST_SetSRID(ST_MakePoint(389159, 158608), 28992), 4326)   --geom fom x/y 28992 into lat/lng 4326
            , null -- descriptionxml
            , null -- url  
            );

-- SELECT * FROM public.featureofinterest;

/*
observationtype
For a particular constellation of procedure, observedProperty and ObservationOffering, observations shall always be encoded in the same observationType . The InsertObservation operation shall check whether a differing observationType is inserted for the same constellation of procedure, observedProperty and ObservationOffering that was inserted before.
*/
INSERT INTO public.observationtype (
            -- observationtypeid -- default value by sequence
            observationtype )
     VALUES (
            'obstype x'
            );

-- SELECT * FROM public.observationtype;



-- proceduredescriptionformat
INSERT INTO public.proceduredescriptionformat (
            -- proceduredescriptionformatid -- default value by sequence
            proceduredescriptionformat )
     VALUES (
            'procdescformat x'
            );

INSERT INTO public.procedure(
            -- procedureid -- default value by sequence
			hibernatediscriminator
			, proceduredescriptionformatid
			, identifier
			, codespace
			, name
			, codespacename
			, description
			--, deleted -- default 'F' false
			, descriptionfile
			, referenceflag)
    VALUES (null -- hibernatediscriminator
	        , (select proceduredescriptionformatid from public.proceduredescriptionformat where proceduredescriptionformat = 'procdescformat x')
			, 'proc_0001' -- identifier
			, null -- codespace
			, 'procedurename 0001'
			, null --codespacename
			, 'description....'
			-- deleted -- defaults value 'F' false
			, null --descriptionfile
            , null --referenceflag
			);


INSERT INTO public.offering(
            -- offeringid -- default value by sequence
			hibernatediscriminator
			, identifier
			, codespace
			, name
			, codespacename
			, description
			)
    VALUES (null -- hibernatediscriminator
	        , 'offer_0001' -- idetifier
			, null --codespace
			, 'Offering 1'
			, null -- codespacename
			, '...' -- description
			);

/*
observation
*/
INSERT INTO public.observation(
            -- observationid -- default value by sequence
			seriesid
			, phenomenontimestart
			, phenomenontimeend
			, resulttime
			, identifier
			, codespace
			, name
			, codespacename
			, description
			, deleted
			, validtimestart
			, validtimeend
			, unitid
			, samplinggeometry
			)
    VALUES (
	         
			?, ?, 
            ?, ?
			, 'obs_20150718_0001' -- identifier
			, ?, ?, ?, 
            ?, ?, ?, ?, ?);


INSERT INTO public.observationhasoffering(
            observationid
			, offeringid)
    VALUES (
	        (select observationid from public.observation where identifier = 'obs_20150718_0001')
			, (select offeringid from public.offering where identifier = 'offer_0001')
		   );


/*

cleanup

DELETE FROM public.featureofinterest;
DELETE FROM public.featureofinteresttype;
DELETE FROM public.observation;
DELETE FROM public.offering;
DELETE FROM public.observationtype;
DELETE FROM public.observationhasoffering;
DELETE FROM public.procedure;
DELETE FROM public.proceduredescriptionformat;

*/

